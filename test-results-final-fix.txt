
> vscode-mcp-server@0.0.4 pretest
> npm run compile && npm run lint


> vscode-mcp-server@0.0.4 compile
> tsc -p ./


> vscode-mcp-server@0.0.4 lint
> eslint src


> vscode-mcp-server@0.0.4 test
> vscode-test

- Resolving version...
Γ£ö Validated version: 1.100.2
Γ£ö Found existing install in C:\Users\plafayette\workspace\github_projects\vscode-mcp-server\.vscode-test\vscode-win32-x64-archive-1.100.2

[main 2025-05-30T17:31:18.309Z] update#setState disabled
[main 2025-05-30T17:31:18.310Z] update#ctor - updates are disabled by the environment
[main 2025-05-30T17:31:18.346Z] Error: Error mutex already exists
    at Fu.S (file:///C:/Users/plafayette/workspace/github_projects/vscode-mcp-server/.vscode-test/vscode-win32-x64-archive-1.100.2/resources/app/out/main.js:125:18317)
ComputeTargetPlatform: win32-x64
Started local extension host with pid 47208.
Loading development extension at c:\Users\plafayette\workspace\github_projects\vscode-mcp-server
ChatSessionStore: Migrating 0 chat sessions from storage service to file system
Settings Sync: Account status changed from uninitialized to unavailable

  ValidationHierarchy Tests
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-exact-match-hint.ts
[applyDiff] Starting apply_diff for test-exact-match-hint.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-exact-match-hint.ts
[validateDiffSections] Processing diff 0: lines 4-6
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 4-6
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-exact-match-hint.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-exact-match-hint.ts
[applyDiffToFile] Changes applied successfully to test-exact-match-hint.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-exact-match-hint.ts in 193ms
[applyDiff] apply_diff_complete succeeded (193ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-exact-match-hint.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
    Γ£ö Exact match at hint location (Level 1) (398ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-exact-match-near.ts
[applyDiff] Starting apply_diff for test-exact-match-near.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-exact-match-near.ts
[validateDiffSections] Processing diff 0: lines 5-8
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Match found with exact-match-near-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded (1ms) {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 6-8
[applyDiff] Structural analysis: No structural changes detected
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 1',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for test-exact-match-near.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-exact-match-near.ts
[applyDiffToFile] Changes applied successfully to test-exact-match-near.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-exact-match-near.ts in 206ms
[applyDiff] apply_diff_complete succeeded (206ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-exact-match-near.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
    Γ£ö Exact match near hint (Level 1 - radius search) (436ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-whitespace-normalized.ts
[applyDiff] Starting apply_diff for test-whitespace-normalized.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-whitespace-normalized.ts
[validateDiffSections] Processing diff 0: lines 0-3
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match (level 1)
[ValidationHierarchy] Trying strategy: normalized-whitespace (level 2)
[ValidationHierarchy] Match found with normalized-whitespace (confidence: 0.9)
[ValidationHierarchy] Trying strategy: case-insensitive (level 2)
[ValidationHierarchy] Match found with case-insensitive (confidence: 0.9)
[ValidationHierarchy] Trying strategy: similarity-high (level 3)
[ValidationHierarchy] Match found with similarity-high (confidence: 0.9459459459459459)
[validateDiffSections] diff_validation_0 succeeded (2ms) {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'similarity',
  confidence: 0.9459459459459459,
  earlyTerminated: false
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-3
[applyDiff] Structural analysis: No structural changes detected
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 1',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for test-whitespace-normalized.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-whitespace-normalized.ts
[applyDiffToFile] Changes applied successfully to test-whitespace-normalized.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-whitespace-normalized.ts in 108ms
[applyDiff] apply_diff_complete succeeded (108ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-whitespace-normalized.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 2
}
    Γ£ö Whitespace-normalized match (Level 2) (375ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-case-insensitive.ts
[applyDiff] Starting apply_diff for test-case-insensitive.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-case-insensitive.ts
[validateDiffSections] Processing diff 0: lines 0-3
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match (level 1)
[ValidationHierarchy] Trying strategy: normalized-whitespace (level 2)
[ValidationHierarchy] Trying strategy: case-insensitive (level 2)
[ValidationHierarchy] Match found with case-insensitive (confidence: 0.9)
[ValidationHierarchy] Trying strategy: similarity-high (level 3)
[ValidationHierarchy] Trying strategy: similarity-medium (level 3)
[ValidationHierarchy] Match found with similarity-medium (confidence: 0.8)
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'similarity',
  confidence: 0.8,
  earlyTerminated: false
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-3
[applyDiff] Structural analysis: No structural changes detected
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 1',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for test-case-insensitive.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-case-insensitive.ts
[applyDiffToFile] Changes applied successfully to test-case-insensitive.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-case-insensitive.ts in 87ms
[applyDiff] apply_diff_complete succeeded (87ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-case-insensitive.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 2
}
    Γ£ö Case-insensitive match (Level 2) (336ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-similarity-match.ts
[applyDiff] Starting apply_diff for test-similarity-match.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-similarity-match.ts
[validateDiffSections] Processing diff 0: lines 0-4
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match (level 1)
[ValidationHierarchy] Trying strategy: normalized-whitespace (level 2)
[ValidationHierarchy] Trying strategy: case-insensitive (level 2)
[ValidationHierarchy] Trying strategy: similarity-high (level 3)
[ValidationHierarchy] Trying strategy: similarity-medium (level 3)
[ValidationHierarchy] Trying strategy: similarity-low (level 3)
[ValidationHierarchy] Trying strategy: contextual (level 3)
[validateDiffSections] diff_validation_0 failed (2ms) {
  operation: 'diff_validation_0',
  success: false,
  diffIndex: 0,
  strategy: 'none',
  confidence: 0,
  earlyTerminated: false
}
[validateDiffSections] No match found for diff 0
Validation Hierarchy Report:
==================================================

Strategy: exact-match-at-hint (Level 1)
Description: Exact match at hinted line location
Duration: 0ms
Result: NO MATCH

Strategy: exact-match-near-hint (Level 1)
Description: Exact match near hinted line (┬▒5 lines)
Duration: 1ms
Result: NO MATCH

Strategy: exact-match (Level 1)
Description: Character-for-character exact matching including whitespace
Duration: 0ms
Result: NO MATCH

Strategy: normalized-whitespace (Level 2)
Description: Whitespace-normalized matching (ignores leading/trailing whitespace)
Duration: 0ms
Result: NO MATCH

Strategy: case-insensitive (Level 2)
Description: Case-insensitive matching
Duration: 0ms
Result: NO MATCH

Strategy: similarity-high (Level 3)
Description: High-confidence similarity matching (90%+)
Duration: 0ms
Result: NO MATCH

Strategy: similarity-medium (Level 3)
Description: Medium-confidence similarity matching (80%+)
Duration: 0ms
Result: NO MATCH

Strategy: similarity-low (Level 3)
Description: Low-confidence similarity matching (70%+)
Duration: 0ms
Result: NO MATCH

Strategy: contextual (Level 3)
Description: Contextual matching using surrounding code
Duration: 1ms
Result: NO MATCH
    1) Similarity match (Level 3)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-multiple-matches.ts
[applyDiff] Starting apply_diff for test-multiple-matches.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-multiple-matches.ts
[validateDiffSections] Processing diff 0: lines 4-6
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 4-6
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-multiple-matches.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-multiple-matches.ts
[applyDiffToFile] Changes applied successfully to test-multiple-matches.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-multiple-matches.ts in 50ms
[applyDiff] apply_diff_complete succeeded (50ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-multiple-matches.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
    Γ£ö Multiple identical matches with line hint disambiguation (247ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-early-termination.ts
[applyDiff] Starting apply_diff for test-early-termination.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-early-termination.ts
[validateDiffSections] Processing diff 0: lines 0-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-2
[applyDiff] Structural analysis: No structural changes detected
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 1',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for test-early-termination.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-early-termination.ts
[applyDiffToFile] Changes applied successfully to test-early-termination.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-early-termination.ts in 45ms
[applyDiff] apply_diff_complete succeeded (45ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-early-termination.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
    Γ£ö Early termination on high confidence match (265ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-failed-match.ts
[applyDiff] Starting apply_diff for test-failed-match.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-validation\test-failed-match.ts
[validateDiffSections] Processing diff 0: lines 0-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match (level 1)
[ValidationHierarchy] Trying strategy: normalized-whitespace (level 2)
[ValidationHierarchy] Trying strategy: case-insensitive (level 2)
[ValidationHierarchy] Trying strategy: similarity-high (level 3)
[ValidationHierarchy] Trying strategy: similarity-medium (level 3)
[ValidationHierarchy] Trying strategy: similarity-low (level 3)
[ValidationHierarchy] Match found with similarity-low (confidence: 0.7142857142857143)
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'similarity',
  confidence: 0.7142857142857143,
  earlyTerminated: false
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-2
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-failed-match.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-failed-match.ts
[applyDiffToFile] Changes applied successfully to test-failed-match.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-failed-match.ts in 45ms
[applyDiff] apply_diff_complete succeeded (45ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-failed-match.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
    2) Failed match handling
  StructuralValidator Tests
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-structural\test-unbalanced-braces.ts
[applyDiff] Starting apply_diff for test-unbalanced-braces.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-structural\test-unbalanced-braces.ts
[validateDiffSections] Processing diff 0: lines 1-3
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 1-3
[applyDiff] Structural analysis: Structural changes: Brace balance changed by +1
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_braces',
    severity: 'high',
    message: 'Unbalanced braces: 3 open, 2 close',
    details: 'Change from before: 0 ΓåÆ 1'
  },
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 1',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for test-unbalanced-braces.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-unbalanced-braces.ts
[applyDiffToFile] Changes applied successfully to test-unbalanced-braces.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-unbalanced-braces.ts in 53ms
[applyDiff] apply_diff_complete succeeded (53ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-unbalanced-braces.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 2
}
    Γ£ö Detects unbalanced braces (233ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-structural\test-unbalanced-parentheses.ts
[applyDiff] Starting apply_diff for test-unbalanced-parentheses.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-structural\test-unbalanced-parentheses.ts
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: Structural changes: Parenthesis balance changed by +1
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_parentheses',
    severity: 'high',
    message: 'Unbalanced parentheses: 2 open, 1 close',
    details: 'Change from before: 0 ΓåÆ 1'
  }
]
[showDiffAndGetApproval] Showing diff for test-unbalanced-parentheses.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-unbalanced-parentheses.ts
[applyDiffToFile] Changes applied successfully to test-unbalanced-parentheses.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-unbalanced-parentheses.ts in 40ms
[applyDiff] apply_diff_complete succeeded (40ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-unbalanced-parentheses.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
    Γ£ö Detects unbalanced parentheses (251ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-structural\test-unbalanced-quotes.ts
[applyDiff] Starting apply_diff for test-unbalanced-quotes.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-structural\test-unbalanced-quotes.ts
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: No structural changes detected
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 1',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for test-unbalanced-quotes.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-unbalanced-quotes.ts
[applyDiffToFile] Changes applied successfully to test-unbalanced-quotes.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-unbalanced-quotes.ts in 38ms
[applyDiff] apply_diff_complete succeeded (38ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-unbalanced-quotes.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
[applyDiff] Performance metrics after 10 operations: { avgDuration: '86.50ms', successRate: '100.0%' }
    Γ£ö Detects unbalanced quotes (235ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-structural\test-config.json
[applyDiff] Starting apply_diff for test-config.json with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-structural\test-config.json
[validateDiffSections] Processing diff 0: lines 1-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 1-2
[applyDiff] Structural analysis: No structural changes detected
[applyDiff] Structural warnings: [
  {
    type: 'json_invalid',
    severity: 'high',
    message: 'Invalid JSON structure',
    details: 'Expected double-quoted property name in JSON at position 46 (line 4 column 1)'
  }
]
[showDiffAndGetApproval] Showing diff for test-config.json
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-config.json
[applyDiffToFile] Changes applied successfully to test-config.json
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-config.json in 66ms
[applyDiff] apply_diff_complete succeeded (66ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-config.json',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
    Γ£ö Validates JSON structure (153ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-structural\test-block-comments.ts
[applyDiff] Starting apply_diff for test-block-comments.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-structural\test-block-comments.ts
[validateDiffSections] Processing diff 0: lines 2-3
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 2-3
[applyDiff] Structural analysis: Structural changes: Brace balance changed by +1
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_braces',
    severity: 'high',
    message: 'Unbalanced braces: 1 open, 0 close',
    details: 'Change from before: 0 ΓåÆ 1'
  },
  {
    type: 'unclosed_comment',
    severity: 'high',
    message: 'Unclosed block comment detected',
    details: '2 /* found but only 1 */'
  }
]
[showDiffAndGetApproval] Showing diff for test-block-comments.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-block-comments.ts
[applyDiffToFile] Changes applied successfully to test-block-comments.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-block-comments.ts in 46ms
[applyDiff] apply_diff_complete succeeded (46ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-block-comments.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 2
}
    Γ£ö Handles block comments correctly (261ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-structural\test-balanced-structures.ts
[applyDiff] Starting apply_diff for test-balanced-structures.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-structural\test-balanced-structures.ts
[validateDiffSections] Processing diff 0: lines 1-3
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 1-3
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-balanced-structures.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-balanced-structures.ts
[applyDiffToFile] Changes applied successfully to test-balanced-structures.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-balanced-structures.ts in 66ms
[applyDiff] apply_diff_complete succeeded (66ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-balanced-structures.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
    Γ£ö No warnings for balanced structures (268ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-structural\test-structural-balance.ts
[applyDiff] Starting apply_diff for test-structural-balance.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-structural\test-structural-balance.ts
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: No structural changes detected
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 1',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for test-structural-balance.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-structural-balance.ts
[applyDiffToFile] Changes applied successfully to test-structural-balance.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-structural-balance.ts in 44ms
[applyDiff] apply_diff_complete succeeded (44ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-structural-balance.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
    Γ£ö Detects changes in structural balance (247ms)
  Apply Diff Integration Tests
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-integration\test-project\user.service.ts
[applyDiff] Starting apply_diff for test-project\user.service.ts with 3 diff sections
[validateDiffSections] Starting validation for 3 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-integration\test-project\user.service.ts
[validateDiffSections] Processing diff 0: lines 7-10
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[validateDiffSections] Processing diff 1: lines 15-17
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Match found with exact-match-near-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_1 succeeded {
  operation: 'diff_validation_1',
  success: true,
  diffIndex: 1,
  strategy: 'exact',
  confidence: 1,
  earlyTerminated: true
}
[validateDiffSections] Processing diff 2: lines 22-24
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_2 succeeded {
  operation: 'diff_validation_2',
  success: true,
  diffIndex: 2,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 3 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 22-24
[createModifiedContent] Applying change at lines 16-18
[createModifiedContent] Applying change at lines 7-10
[applyDiff] Structural analysis: Structural changes: Single quotes changed by +3, Backticks changed by +1
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of single quotes: 3',
    details: 'May indicate an unclosed string literal'
  },
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 1',
    details: 'May indicate an unclosed string literal'
  },
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of backticks: 1',
    details: 'May indicate an unclosed template literal'
  }
]
[showDiffAndGetApproval] Showing diff for test-project\user.service.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-project\user.service.ts
[applyDiffToFile] Changes applied successfully to test-project\user.service.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-project\user.service.ts in 77ms
[applyDiff] apply_diff_complete succeeded (77ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-project\\user.service.ts',
  diffsCount: 3,
  partialSuccess: false,
  warningsCount: 3
}
    Γ£ö Complete TypeScript refactoring workflow (305ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-integration\test-project\package.json
[applyDiff] Starting apply_diff for test-project\package.json with 2 diff sections
[validateDiffSections] Starting validation for 2 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-integration\test-project\package.json
[validateDiffSections] Processing diff 0: lines 5-8
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[validateDiffSections] Processing diff 1: lines 9-11
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_1 succeeded {
  operation: 'diff_validation_1',
  success: true,
  diffIndex: 1,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 2 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 9-11
[createModifiedContent] Applying change at lines 5-8
[applyDiff] Structural analysis: Structural changes: Double quotes changed by +12
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 29',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for test-project\package.json
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-project\package.json
[applyDiffToFile] Changes applied successfully to test-project\package.json
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-project\package.json in 67ms
[applyDiff] apply_diff_complete succeeded (67ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-project\\package.json',
  diffsCount: 2,
  partialSuccess: false,
  warningsCount: 1
}
    Γ£ö JSON configuration update workflow (277ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-integration\test-project\math.js
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-integration\test-project\calculator.js
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-integration\test-project\index.js
[applyDiff] Starting apply_diff for test-project\math.js with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-integration\test-project\math.js
[validateDiffSections] Processing diff 0: lines 0-8
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-8
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-project\math.js
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-project\math.js
[applyDiffToFile] Changes applied successfully to test-project\math.js
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-project\math.js in 97ms
[applyDiff] apply_diff_complete succeeded (97ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-project\\math.js',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
[applyDiff] Starting apply_diff for test-project\calculator.js with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-integration\test-project\calculator.js
[validateDiffSections] Processing diff 0: lines 0-8
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-8
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-project\calculator.js
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-project\calculator.js
[applyDiffToFile] Changes applied successfully to test-project\calculator.js
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-project\calculator.js in 135ms
[applyDiff] apply_diff_complete succeeded (135ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-project\\calculator.js',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
[applyDiff] Starting apply_diff for test-project\index.js with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-integration\test-project\index.js
[validateDiffSections] Processing diff 0: lines 0-3
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-3
[applyDiff] Structural analysis: No structural changes detected
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of single quotes: 3',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for test-project\index.js
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-project\index.js
[applyDiffToFile] Changes applied successfully to test-project\index.js
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-project\index.js in 141ms
[applyDiff] apply_diff_complete succeeded (141ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-project\\index.js',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
    Γ£ö Multi-file refactoring workflow (945ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-integration\test-project\error-test.js
[applyDiff] Starting apply_diff for test-project\error-test.js with 3 diff sections
[validateDiffSections] Starting validation for 3 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-integration\test-project\error-test.js
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[validateDiffSections] Processing diff 1: lines 1-1
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match (level 1)
[ValidationHierarchy] Trying strategy: normalized-whitespace (level 2)
[ValidationHierarchy] Trying strategy: case-insensitive (level 2)
[ValidationHierarchy] Trying strategy: similarity-high (level 3)
[ValidationHierarchy] Trying strategy: similarity-medium (level 3)
[ValidationHierarchy] Trying strategy: similarity-low (level 3)
[ValidationHierarchy] Match found with similarity-low (confidence: 0.78125)
[validateDiffSections] diff_validation_1 succeeded (1ms) {
  operation: 'diff_validation_1',
  success: true,
  diffIndex: 1,
  strategy: 'similarity',
  confidence: 0.78125,
  earlyTerminated: false
}
[validateDiffSections] Processing diff 2: lines 2-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_2 succeeded {
  operation: 'diff_validation_2',
  success: true,
  diffIndex: 2,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[applyDiff] Partial success mode: 3/3 diffs validated successfully
[applyDiff] Conflict in diff 0: Diff sections 0 and 1 have overlapping line ranges
[createModifiedContent] Creating modified content with 3 diff sections (partial mode: true)
[createModifiedContent] Applying change at lines 2-2
[createModifiedContent] Applying change at lines 0-0
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-project\error-test.js
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-project\error-test.js
[applyDiffToFile] Changes applied successfully to test-project\error-test.js
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-project\error-test.js in 69ms
[applyDiff] apply_diff_complete succeeded (69ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-project\\error-test.js',
  diffsCount: 3,
  partialSuccess: true,
  warningsCount: 2
}
[applyDiff] Performance metrics after 20 operations: { avgDuration: '83.65ms', successRate: '100.0%' }
    3) Error recovery and partial success workflow
  Extension Test Suite
    Γ£ö Extension should read port from configuration
    Γ£ö Status bar item should be created with proper attributes
    Γ£ö Server info command should be registered
    Γ£ö Commands should be registered properly
    Γ£ö Deactivate should clean up resources
  Edge Cases Tests
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-edge\test-empty-file.ts
[applyDiff] Starting apply_diff for test-empty-file.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-edge\test-empty-file.ts
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-empty-file.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-empty-file.ts
[applyDiffToFile] Changes applied successfully to test-empty-file.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-empty-file.ts in 54ms
[applyDiff] apply_diff_complete succeeded (54ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-empty-file.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
    Γ£ö Empty file handling (265ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-edge\test-single-line.ts
[applyDiff] Starting apply_diff for test-single-line.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-edge\test-single-line.ts
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-single-line.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-single-line.ts
[applyDiffToFile] Changes applied successfully to test-single-line.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-single-line.ts in 65ms
[applyDiff] apply_diff_complete succeeded (65ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-single-line.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
    Γ£ö Single line file (268ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-edge\test-no-newline.ts
[applyDiff] Starting apply_diff for test-no-newline.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-edge\test-no-newline.ts
[validateDiffSections] Processing diff 0: lines 2-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 2-2
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-no-newline.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-no-newline.ts
[applyDiffToFile] Changes applied successfully to test-no-newline.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-no-newline.ts in 56ms
[applyDiff] apply_diff_complete succeeded (56ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-no-newline.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
    Γ£ö File with no newline at end (261ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-edge\test-long-lines.ts
[applyDiff] Starting apply_diff for test-long-lines.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-edge\test-long-lines.ts
[validateDiffSections] Processing diff 0: lines 1-1
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 1-1
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-long-lines.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-long-lines.ts
[applyDiffToFile] Changes applied successfully to test-long-lines.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-long-lines.ts in 36ms
[applyDiff] apply_diff_complete succeeded (36ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-long-lines.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
    Γ£ö Very long lines (229ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-edge\test-unicode.ts
[applyDiff] Starting apply_diff for test-unicode.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-edge\test-unicode.ts
[validateDiffSections] Processing diff 0: lines 1-1
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 1-1
[applyDiff] Structural analysis: No structural changes detected
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 3',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for test-unicode.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-unicode.ts
[applyDiffToFile] Changes applied successfully to test-unicode.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-unicode.ts in 54ms
[applyDiff] apply_diff_complete succeeded (54ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-unicode.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
    Γ£ö Unicode and special characters (268ms)
  ContentMatcher Test Suite
    Exact Match Tests
      Γ£ö Should find exact match at beginning of file
      Γ£ö Should find exact match in middle of file
      Γ£ö Should return null when no exact match found
      Γ£ö Should use start hint to optimize search
    Normalized Match Tests
      Γ£ö Should find match ignoring leading whitespace
      Γ£ö Should find match ignoring trailing whitespace
      Γ£ö Should handle tab to space conversion
      Γ£ö Should respect case sensitivity option
    Similarity Match Tests
      Γ£ö Should find similar content above threshold
      Γ£ö Should sort results by confidence
      Γ£ö Should return empty array when no matches above threshold
    Best Match Selection Tests
      Γ£ö Should select match with highest confidence
      Γ£ö Should return null when no candidates meet minimum confidence
      Γ£ö Should return null for empty candidates array
    User Confirmation Requirements
      Γ£ö Should require confirmation for low confidence matches
      Γ£ö Should require confirmation when issues are present
      Γ£ö Should not require confirmation for high confidence, no issues
  Caching and Performance Tests
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-cache\test-cache-multiple-diffs.ts
[applyDiff] Starting apply_diff for test-cache-multiple-diffs.ts with 4 diff sections
[validateDiffSections] Starting validation for 4 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-cache\test-cache-multiple-diffs.ts
[validateDiffSections] Processing diff 0: lines 0-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[validateDiffSections] Processing diff 1: lines 4-6
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_1 succeeded {
  operation: 'diff_validation_1',
  success: true,
  diffIndex: 1,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[validateDiffSections] Processing diff 2: lines 8-10
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_2 succeeded {
  operation: 'diff_validation_2',
  success: true,
  diffIndex: 2,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[validateDiffSections] Processing diff 3: lines 12-14
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_3 succeeded {
  operation: 'diff_validation_3',
  success: true,
  diffIndex: 3,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 4 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 12-14
[createModifiedContent] Applying change at lines 8-10
[createModifiedContent] Applying change at lines 4-6
[createModifiedContent] Applying change at lines 0-2
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-cache-multiple-diffs.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-cache-multiple-diffs.ts
[applyDiffToFile] Changes applied successfully to test-cache-multiple-diffs.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-cache-multiple-diffs.ts in 40ms
[applyDiff] apply_diff_complete succeeded (40ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-cache-multiple-diffs.ts',
  diffsCount: 4,
  partialSuccess: false,
  warningsCount: 0
}
    Γ£ö Multiple diffs benefit from file caching (248ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-cache\test-partial-success.ts
[applyDiff] Starting apply_diff for test-partial-success.ts with 3 diff sections
[validateDiffSections] Starting validation for 3 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-cache\test-partial-success.ts
[validateDiffSections] Processing diff 0: lines 0-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[validateDiffSections] Processing diff 1: lines 0-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match (level 1)
[ValidationHierarchy] Trying strategy: normalized-whitespace (level 2)
[ValidationHierarchy] Trying strategy: case-insensitive (level 2)
[ValidationHierarchy] Trying strategy: similarity-high (level 3)
[ValidationHierarchy] Trying strategy: similarity-medium (level 3)
[ValidationHierarchy] Trying strategy: similarity-low (level 3)
[ValidationHierarchy] Match found with similarity-low (confidence: 0.7391304347826086)
[validateDiffSections] diff_validation_1 succeeded {
  operation: 'diff_validation_1',
  success: true,
  diffIndex: 1,
  strategy: 'similarity',
  confidence: 0.7391304347826086,
  earlyTerminated: false
}
[validateDiffSections] Processing diff 2: lines 4-6
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_2 succeeded {
  operation: 'diff_validation_2',
  success: true,
  diffIndex: 2,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[applyDiff] Partial success mode: 3/3 diffs validated successfully
[applyDiff] Conflict in diff 1: Diff sections 1 and 2 have overlapping line ranges
[createModifiedContent] Creating modified content with 3 diff sections (partial mode: true)
[createModifiedContent] Applying change at lines 4-6
[createModifiedContent] Applying change at lines 4-6
[createModifiedContent] Applying change at lines 0-2
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-partial-success.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-partial-success.ts
[applyDiffToFile] Changes applied successfully to test-partial-success.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-partial-success.ts in 60ms
[applyDiff] apply_diff_complete succeeded (60ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-partial-success.ts',
  diffsCount: 3,
  partialSuccess: true,
  warningsCount: 2
}
    Γ£ö Partial success mode applies successful diffs (263ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-cache\test-early-termination-perf.ts
[applyDiff] Starting apply_diff for test-early-termination-perf.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-cache\test-early-termination-perf.ts
[validateDiffSections] Processing diff 0: lines 0-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-2
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-early-termination-perf.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-early-termination-perf.ts
[applyDiffToFile] Changes applied successfully to test-early-termination-perf.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-early-termination-perf.ts in 71ms
[applyDiff] apply_diff_complete succeeded (71ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-early-termination-perf.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
[applyDiff] Starting apply_diff for test-early-termination-perf.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Using cached content for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-cache\test-early-termination-perf.ts
[validateDiffSections] Processing diff 0: lines 500-502
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match (level 1)
[ValidationHierarchy] Trying strategy: normalized-whitespace (level 2)
[ValidationHierarchy] Trying strategy: case-insensitive (level 2)
[ValidationHierarchy] Trying strategy: similarity-high (level 3)
[ValidationHierarchy] Match found with similarity-high (confidence: 0.9736842105263158)
[ValidationHierarchy] Early termination - confidence 0.9736842105263158 >= 0.95
[validateDiffSections] diff_validation_0 succeeded (44ms) {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'similarity',
  confidence: 0.9736842105263158,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 2000-2002
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-early-termination-perf.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-early-termination-perf.ts
[applyDiffToFile] Changes applied successfully to test-early-termination-perf.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-early-termination-perf.ts in 189ms
[applyDiff] apply_diff_complete succeeded (189ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-early-termination-perf.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
Exact match took: 72ms, Fuzzy match took: 189ms
    Γ£ö Early termination improves performance for exact matches (454ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-cache\test-cache-ttl.ts
[applyDiff] Starting apply_diff for test-cache-ttl.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-cache\test-cache-ttl.ts
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-cache-ttl.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-cache-ttl.ts
[applyDiffToFile] Changes applied successfully to test-cache-ttl.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-cache-ttl.ts in 30ms
[applyDiff] apply_diff_complete succeeded (30ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-cache-ttl.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
[applyDiff] Performance metrics after 30 operations: { avgDuration: '77.60ms', successRate: '100.0%' }
    Γ£ö Cache expires after TTL (256ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-cache\test-structured-logger.ts
[applyDiff] Starting apply_diff for test-structured-logger.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-cache\test-structured-logger.ts
[validateDiffSections] Processing diff 0: lines 0-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-2
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-structured-logger.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-structured-logger.ts
[applyDiffToFile] Changes applied successfully to test-structured-logger.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-structured-logger.ts in 34ms
[applyDiff] apply_diff_complete succeeded (34ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-structured-logger.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
[applyDiff] Starting apply_diff for test-structured-logger.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Using cached content for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-cache\test-structured-logger.ts
[validateDiffSections] Processing diff 0: lines 0-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match (level 1)
[ValidationHierarchy] Trying strategy: normalized-whitespace (level 2)
[ValidationHierarchy] Trying strategy: case-insensitive (level 2)
[ValidationHierarchy] Trying strategy: similarity-high (level 3)
[ValidationHierarchy] Trying strategy: similarity-medium (level 3)
[ValidationHierarchy] Match found with similarity-medium (confidence: 0.8974358974358975)
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'similarity',
  confidence: 0.8974358974358975,
  earlyTerminated: false
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-2
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-structured-logger.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-structured-logger.ts
[applyDiffToFile] Changes applied successfully to test-structured-logger.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-structured-logger.ts in 118ms
[applyDiff] apply_diff_complete succeeded (118ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-structured-logger.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
[applyDiff] Starting apply_diff for test-structured-logger.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Using cached content for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-cache\test-structured-logger.ts
[validateDiffSections] Processing diff 0: lines 0-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match (level 1)
[ValidationHierarchy] Trying strategy: normalized-whitespace (level 2)
[ValidationHierarchy] Trying strategy: case-insensitive (level 2)
[ValidationHierarchy] Trying strategy: similarity-high (level 3)
[ValidationHierarchy] Trying strategy: similarity-medium (level 3)
[ValidationHierarchy] Match found with similarity-medium (confidence: 0.8974358974358975)
[validateDiffSections] diff_validation_0 succeeded (1ms) {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'similarity',
  confidence: 0.8974358974358975,
  earlyTerminated: false
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-2
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-structured-logger.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-structured-logger.ts
[applyDiffToFile] Changes applied successfully to test-structured-logger.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-structured-logger.ts in 92ms
[applyDiff] apply_diff_complete succeeded (92ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-structured-logger.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
    Γ£ö Performance tracking with StructuredLogger (455ms)
  Backward Compatibility Tests
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-backward\test-old-params.ts
[applyDiff] Starting apply_diff for test-old-params.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-backward\test-old-params.ts
[apply_diff] Deprecation warning: 'originalContent' parameter in diff[0] is deprecated. Use 'search' instead.
[apply_diff] Deprecation warning: 'newContent' parameter in diff[0] is deprecated. Use 'replace' instead.
[validateDiffSections] Processing diff 0: lines 0-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[apply_diff] Deprecation warning: 'originalContent' parameter in diff[0] is deprecated. Use 'search' instead.
[apply_diff] Deprecation warning: 'newContent' parameter in diff[0] is deprecated. Use 'replace' instead.
[createModifiedContent] Applying change at lines 0-2
[applyDiff] Structural analysis: No structural changes detected
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 1',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for test-old-params.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-old-params.ts
[applyDiffToFile] Changes applied successfully to test-old-params.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-old-params.ts in 66ms
[applyDiff] apply_diff_complete succeeded (66ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-old-params.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
    Γ£ö Old parameter names (originalContent/newContent) still work (273ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-backward\test-mixed-params.ts
[applyDiff] Starting apply_diff for test-mixed-params.ts with 2 diff sections
[validateDiffSections] Starting validation for 2 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-backward\test-mixed-params.ts
[apply_diff] Deprecation warning: 'originalContent' parameter in diff[1] is deprecated. Use 'search' instead.
[apply_diff] Deprecation warning: 'newContent' parameter in diff[1] is deprecated. Use 'replace' instead.
[validateDiffSections] Processing diff 0: lines 0-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[validateDiffSections] Processing diff 1: lines 4-6
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_1 succeeded {
  operation: 'diff_validation_1',
  success: true,
  diffIndex: 1,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 2 diff sections (partial mode: false)
[apply_diff] Deprecation warning: 'originalContent' parameter in diff[1] is deprecated. Use 'search' instead.
[apply_diff] Deprecation warning: 'newContent' parameter in diff[1] is deprecated. Use 'replace' instead.
[createModifiedContent] Applying change at lines 4-6
[createModifiedContent] Applying change at lines 0-2
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-mixed-params.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-mixed-params.ts
[applyDiffToFile] Changes applied successfully to test-mixed-params.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-mixed-params.ts in 40ms
[applyDiff] apply_diff_complete succeeded (40ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-mixed-params.ts',
  diffsCount: 2,
  partialSuccess: false,
  warningsCount: 0
}
    Γ£ö Mixed old and new parameter names work (267ms)
[applyDiff] Starting apply_diff for new-file-compat-test.ts with 1 diff sections
[applyDiff] File new-file-compat-test.ts does not exist. Will create it.
[createWorkspaceFile] Starting with path: new-file-compat-test.ts, overwrite: false, ignoreIfExists: false
[createWorkspaceFile] File URI: c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-backward\new-file-compat-test.ts
[createWorkspaceFile] File created successfully: c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-backward\new-file-compat-test.ts
[createWorkspaceFile] File opened in editor
[applyDiff] Created new file: new-file-compat-test.ts
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-backward\new-file-compat-test.ts
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for new-file-compat-test.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to new-file-compat-test.ts
[applyDiffToFile] Changes applied successfully to new-file-compat-test.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to new-file-compat-test.ts in 199ms
[applyDiff] apply_diff_complete succeeded (199ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'new-file-compat-test.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
    Γ£ö Existing file creation behavior preserved (226ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-backward\test-line-replacement.ts
[applyDiff] Starting apply_diff for test-line-replacement.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-backward\test-line-replacement.ts
[validateDiffSections] Processing diff 0: lines 1-3
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 1-3
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-line-replacement.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-line-replacement.ts
[applyDiffToFile] Changes applied successfully to test-line-replacement.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-line-replacement.ts in 52ms
[applyDiff] apply_diff_complete succeeded (52ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-line-replacement.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
    Γ£ö Line-based replacement behavior unchanged (257ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-backward\test-error-params.ts
[applyDiff] Starting apply_diff for test-error-params.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-backward\test-error-params.ts
    Γ£ö Error behavior for invalid parameters unchanged (181ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-backward\test-multi-diff-compat.ts
[applyDiff] Starting apply_diff for test-multi-diff-compat.ts with 3 diff sections
[validateDiffSections] Starting validation for 3 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace-backward\test-multi-diff-compat.ts
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[validateDiffSections] Processing diff 1: lines 1-1
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_1 succeeded {
  operation: 'diff_validation_1',
  success: true,
  diffIndex: 1,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[validateDiffSections] Processing diff 2: lines 2-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_2 succeeded {
  operation: 'diff_validation_2',
  success: true,
  diffIndex: 2,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 3 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 2-2
[createModifiedContent] Applying change at lines 1-1
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for test-multi-diff-compat.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to test-multi-diff-compat.ts
[applyDiffToFile] Changes applied successfully to test-multi-diff-compat.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to test-multi-diff-compat.ts in 62ms
[applyDiff] apply_diff_complete succeeded (62ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'test-multi-diff-compat.ts',
  diffsCount: 3,
  partialSuccess: false,
  warningsCount: 0
}
    Γ£ö Multi-diff behavior preserved (262ms)
  Apply Diff Integration Tests
    File Validation Tests
      Γ£ö Should fail validation when file does not exist
      Γ£ö Should validate file exists before processing
    Single Diff Application Tests
      Γ£ö Should apply single diff section successfully
      Γ£ö Should handle exact content matching
    Multiple Diff Application Tests
      Γ£ö Should apply multiple non-overlapping diffs
      Γ£ö Should detect and prevent overlapping diffs
    Fuzzy Matching Tests
      Γ£ö Should handle whitespace differences
      Γ£ö Should handle content drift (line number changes)
      Γ£ö Should provide confidence scores for fuzzy matches
    Error Handling Tests
      Γ£ö Should gracefully handle content not found
      Γ£ö Should handle empty files
      Γ£ö Should validate line range boundaries
    User Interaction Tests
      Γ£ö Should present diff for user approval
      Γ£ö Should handle user rejection of changes
    Performance Tests
      Γ£ö Should handle large files efficiently
      Γ£ö Should handle many diff sections efficiently
    Unicode and Special Character Tests
      Γ£ö Should handle Unicode content correctly
      Γ£ö Should handle special characters and escape sequences
  Apply Diff Functional Tests
[TEST] Test mode enabled - auto-approval will be active
[TEST] Extension not found, tests may fail
    Backward Compatibility Tests
[apply_diff] Tool called with filePath=backward-compat.ts, 1 diff sections, partialSuccess=undefined
[applyDiff] Starting apply_diff for backward-compat.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\backward-compat.ts
[apply_diff] Deprecation warning: 'originalContent' parameter in diff[0] is deprecated. Use 'search' instead.
[apply_diff] Deprecation warning: 'newContent' parameter in diff[0] is deprecated. Use 'replace' instead.
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[apply_diff] Deprecation warning: 'originalContent' parameter in diff[0] is deprecated. Use 'search' instead.
[apply_diff] Deprecation warning: 'newContent' parameter in diff[0] is deprecated. Use 'replace' instead.
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for backward-compat.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to backward-compat.ts
[applyDiffToFile] Changes applied successfully to backward-compat.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to backward-compat.ts in 63ms
[applyDiff] apply_diff_complete succeeded (63ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'backward-compat.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
[apply_diff] Successfully completed
      Γ£ö Should work with originalContent/newContent parameters (66ms)
      New Parameter Tests
[apply_diff] Tool called with filePath=new-params.ts, 1 diff sections, partialSuccess=undefined
[applyDiff] Starting apply_diff for new-params.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\new-params.ts
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for new-params.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to new-params.ts
[applyDiffToFile] Changes applied successfully to new-params.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to new-params.ts in 87ms
[applyDiff] apply_diff_complete succeeded (87ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'new-params.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
[applyDiff] Performance metrics after 40 operations: { avgDuration: '78.53ms', successRate: '100.0%' }
[apply_diff] Successfully completed
        Γ£ö Should work with search/replace parameters (90ms)
[apply_diff] Tool called with filePath=mixed-params.ts, 2 diff sections, partialSuccess=undefined
[applyDiff] Starting apply_diff for mixed-params.ts with 2 diff sections
[validateDiffSections] Starting validation for 2 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\mixed-params.ts
[apply_diff] Deprecation warning: 'originalContent' parameter in diff[1] is deprecated. Use 'search' instead.
[apply_diff] Deprecation warning: 'newContent' parameter in diff[1] is deprecated. Use 'replace' instead.
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[validateDiffSections] Processing diff 1: lines 1-1
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_1 succeeded {
  operation: 'diff_validation_1',
  success: true,
  diffIndex: 1,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 2 diff sections (partial mode: false)
[apply_diff] Deprecation warning: 'originalContent' parameter in diff[1] is deprecated. Use 'search' instead.
[apply_diff] Deprecation warning: 'newContent' parameter in diff[1] is deprecated. Use 'replace' instead.
[createModifiedContent] Applying change at lines 1-1
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for mixed-params.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to mixed-params.ts
[applyDiffToFile] Changes applied successfully to mixed-params.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to mixed-params.ts in 121ms
[applyDiff] apply_diff_complete succeeded (121ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'mixed-params.ts',
  diffsCount: 2,
  partialSuccess: false,
  warningsCount: 0
}
[apply_diff] Successfully completed
        Γ£ö Should work with mixed old and new parameters (124ms)
      File Creation Tests
[apply_diff] Tool called with filePath=new-file.ts, 1 diff sections, partialSuccess=undefined
[applyDiff] Starting apply_diff for new-file.ts with 1 diff sections
[applyDiff] File new-file.ts does not exist. Will create it.
[createWorkspaceFile] Starting with path: new-file.ts, overwrite: false, ignoreIfExists: false
[createWorkspaceFile] File URI: c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\new-file.ts
[createWorkspaceFile] File created successfully: c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\new-file.ts
[createWorkspaceFile] File opened in editor
[applyDiff] Created new file: new-file.ts
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\new-file.ts
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: Structural changes: Double quotes changed by +1
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 1',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for new-file.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to new-file.ts
[applyDiffToFile] Changes applied successfully to new-file.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to new-file.ts in 104ms
[applyDiff] apply_diff_complete succeeded (104ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'new-file.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
[apply_diff] Successfully completed
        Γ£ö Should create file if it does not exist (106ms)
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\multi-diff-new.ts
[apply_diff] Tool called with filePath=multi-diff-new.ts, 1 diff sections, partialSuccess=undefined
[applyDiff] Starting apply_diff for multi-diff-new.ts with 1 diff sections
[applyDiff] File multi-diff-new.ts does not exist. Will create it.
[createWorkspaceFile] Starting with path: multi-diff-new.ts, overwrite: false, ignoreIfExists: false
[createWorkspaceFile] File URI: c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\multi-diff-new.ts
[createWorkspaceFile] File created successfully: c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\multi-diff-new.ts
[createWorkspaceFile] File opened in editor
[applyDiff] Created new file: multi-diff-new.ts
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\multi-diff-new.ts
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded (1ms) {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: Structural changes: Double quotes changed by +1
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 1',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for multi-diff-new.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to multi-diff-new.ts
[applyDiffToFile] Changes applied successfully to multi-diff-new.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to multi-diff-new.ts in 96ms
[applyDiff] apply_diff_complete succeeded (96ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'multi-diff-new.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
[apply_diff] Successfully completed
[Cache] Cleared cache for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\multi-diff-new.ts
[apply_diff] Tool called with filePath=multi-diff-new.ts, 2 diff sections, partialSuccess=undefined
[applyDiff] Starting apply_diff for multi-diff-new.ts with 2 diff sections
[validateDiffSections] Starting validation for 2 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\multi-diff-new.ts
[validateDiffSections] Processing diff 0: lines 2-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[validateDiffSections] Processing diff 1: lines 7-7
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Match found with exact-match-near-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_1 succeeded {
  operation: 'diff_validation_1',
  success: true,
  diffIndex: 1,
  strategy: 'exact',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 2 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 4-4
[createModifiedContent] Applying change at lines 2-2
[applyDiff] Structural analysis: Structural changes: Double quotes changed by +2
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 3',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for multi-diff-new.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to multi-diff-new.ts
[applyDiffToFile] Changes applied successfully to multi-diff-new.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to multi-diff-new.ts in 65ms
[applyDiff] apply_diff_complete succeeded (65ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'multi-diff-new.ts',
  diffsCount: 2,
  partialSuccess: false,
  warningsCount: 1
}
[apply_diff] Successfully completed
        Γ£ö Should handle multiple diffs when creating new file (163ms)
      Hierarchical Validation Tests
[apply_diff] Tool called with filePath=whitespace-test.ts, 1 diff sections, partialSuccess=undefined
[applyDiff] Starting apply_diff for whitespace-test.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\whitespace-test.ts
[validateDiffSections] Processing diff 0: lines 0-2
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match (level 1)
[ValidationHierarchy] Trying strategy: normalized-whitespace (level 2)
[ValidationHierarchy] Match found with normalized-whitespace (confidence: 0.9)
[ValidationHierarchy] Trying strategy: case-insensitive (level 2)
[ValidationHierarchy] Match found with case-insensitive (confidence: 0.9)
[ValidationHierarchy] Trying strategy: similarity-high (level 3)
[ValidationHierarchy] Match found with similarity-high (confidence: 0.9444444444444444)
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'similarity',
  confidence: 0.9444444444444444,
  earlyTerminated: false
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-2
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for whitespace-test.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to whitespace-test.ts
[applyDiffToFile] Changes applied successfully to whitespace-test.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to whitespace-test.ts in 73ms
[applyDiff] apply_diff_complete succeeded (73ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'whitespace-test.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 1
}
[apply_diff] Successfully completed
        Γ£ö Should match content with whitespace differences (75ms)
[apply_diff] Tool called with filePath=case-test.ts, 1 diff sections, partialSuccess=undefined
[applyDiff] Starting apply_diff for case-test.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\case-test.ts
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match (level 1)
[ValidationHierarchy] Trying strategy: normalized-whitespace (level 2)
[ValidationHierarchy] Trying strategy: case-insensitive (level 2)
[ValidationHierarchy] Match found with case-insensitive (confidence: 0.9)
[ValidationHierarchy] Trying strategy: similarity-high (level 3)
[ValidationHierarchy] Match found with similarity-high (confidence: 0.9230769230769231)
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'similarity',
  confidence: 0.9230769230769231,
  earlyTerminated: false
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 0-0
[applyDiff] Structural analysis: No structural changes detected
[applyDiff] Structural warnings: [
  {
    type: 'unbalanced_quotes',
    severity: 'medium',
    message: 'Odd number of double quotes: 1',
    details: 'May indicate an unclosed string literal'
  }
]
[showDiffAndGetApproval] Showing diff for case-test.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to case-test.ts
[applyDiffToFile] Changes applied successfully to case-test.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to case-test.ts in 104ms
[applyDiff] apply_diff_complete succeeded (104ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'case-test.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 2
}
[apply_diff] Successfully completed
        Γ£ö Should match content with case differences (106ms)
[apply_diff] Tool called with filePath=line-hint-test.ts, 1 diff sections, partialSuccess=undefined
[applyDiff] Starting apply_diff for line-hint-test.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\line-hint-test.ts
[validateDiffSections] Processing diff 0: lines 50-50
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Match found with exact-match-at-hint (confidence: 1)
[ValidationHierarchy] Early termination - confidence 1 >= 0.95
[validateDiffSections] diff_validation_0 succeeded {
  operation: 'diff_validation_0',
  success: true,
  diffIndex: 0,
  strategy: 'exact-match-at-hint',
  confidence: 1,
  earlyTerminated: true
}
[createModifiedContent] Creating modified content with 1 diff sections (partial mode: false)
[createModifiedContent] Applying change at lines 50-50
[applyDiff] Structural analysis: No structural changes detected
[showDiffAndGetApproval] Showing diff for line-hint-test.ts
[showDiffAndGetApproval] Auto-approval is enabled, automatically approving diff
[applyDiffToFile] Applying changes to line-hint-test.ts
[applyDiffToFile] Changes applied successfully to line-hint-test.ts
[applyDiffToFile] Document saved
[applyDiff] Successfully applied diff to line-hint-test.ts in 100ms
[applyDiff] apply_diff_complete succeeded (100ms) {
  operation: 'apply_diff_complete',
  success: true,
  filePath: 'line-hint-test.ts',
  diffsCount: 1,
  partialSuccess: false,
  warningsCount: 0
}
[apply_diff] Successfully completed
        Γ£ö Should use line hints for faster matching (102ms)
      Error Handling Tests
[apply_diff] Tool called with filePath=error-test.ts, 1 diff sections, partialSuccess=undefined
[applyDiff] Starting apply_diff for error-test.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\error-test.ts
[apply_diff] Error in tool: Error: Diff section 0 missing required 'search' parameter
	at c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\tools\edit-tools.js:302:19
	at Array.map (<anonymous>)
	at normalizeDiffSections (c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\tools\edit-tools.js:289:18)
	at validateDiffSections (c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\tools\edit-tools.js:1160:29)
	at async c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\tools\edit-tools.js:1620:28
        Γ£ö Should fail when neither search/originalContent nor replace/newContent provided
[apply_diff] Tool called with filePath=not-found-test.ts, 1 diff sections, partialSuccess=undefined
[applyDiff] Starting apply_diff for not-found-test.ts with 1 diff sections
[validateDiffSections] Starting validation for 1 diff sections
[Cache] Reading content from disk for c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\temp-workspace\not-found-test.ts
[validateDiffSections] Processing diff 0: lines 0-0
[ValidationHierarchy] Trying strategy: exact-match-at-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match-near-hint (level 1)
[ValidationHierarchy] Trying strategy: exact-match (level 1)
[ValidationHierarchy] Trying strategy: normalized-whitespace (level 2)
[ValidationHierarchy] Trying strategy: case-insensitive (level 2)
[ValidationHierarchy] Trying strategy: similarity-high (level 3)
[ValidationHierarchy] Trying strategy: similarity-medium (level 3)
[ValidationHierarchy] Trying strategy: similarity-low (level 3)
[ValidationHierarchy] Trying strategy: contextual (level 3)
[validateDiffSections] diff_validation_0 failed (1ms) {
  operation: 'diff_validation_0',
  success: false,
  diffIndex: 0,
  strategy: 'none',
  confidence: 0,
  earlyTerminated: false
}
[validateDiffSections] No match found for diff 0
Validation Hierarchy Report:
==================================================

Strategy: exact-match-at-hint (Level 1)
Description: Exact match at hinted line location
Duration: 0ms
Result: NO MATCH

Strategy: exact-match-near-hint (Level 1)
Description: Exact match near hinted line (┬▒5 lines)
Duration: 0ms
Result: NO MATCH

Strategy: exact-match (Level 1)
Description: Character-for-character exact matching including whitespace
Duration: 0ms
Result: NO MATCH

Strategy: normalized-whitespace (Level 2)
Description: Whitespace-normalized matching (ignores leading/trailing whitespace)
Duration: 0ms
Result: NO MATCH

Strategy: case-insensitive (Level 2)
Description: Case-insensitive matching
Duration: 0ms
Result: NO MATCH

Strategy: similarity-high (Level 3)
Description: High-confidence similarity matching (90%+)
Duration: 0ms
Result: NO MATCH

Strategy: similarity-medium (Level 3)
Description: Medium-confidence similarity matching (80%+)
Duration: 0ms
Result: NO MATCH

Strategy: similarity-low (Level 3)
Description: Low-confidence similarity matching (70%+)
Duration: 0ms
Result: NO MATCH

Strategy: contextual (Level 3)
Description: Contextual matching using surrounding code
Duration: 1ms
Result: NO MATCH
        Γ£ö Should provide detailed error when content not found
[apply_diff] Error in tool: Error: Error: Validation failed for not-found-test.ts
============================================================

Expected (search content):
```
content that does not exist
```

Suggestions:
- Check if the code has been modified
- Try using a smaller search pattern
- Verify the line numbers are correct
	at c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\tools\edit-tools.js:1647:23
  82 passing (12s)
  3 failing
  1) ValidationHierarchy Tests
       Similarity match (Level 3):
     Error: Error: Validation failed for test-similarity-match.ts
============================================================

Expected (search content):
```
function calculate(a, b) {
    const sum = a + b;
    return sum;
}
```

Suggestions:
- Check if the code has been modified
- Try using a smaller search pattern
- Verify the line numbers are correct
  	at c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\tools\edit-tools.js:1647:23

  2) ValidationHierarchy Tests
       Failed match handling:

      AssertionError [ERR_ASSERTION]: Error should mention validation failure
      + expected - actual

      -false
      +true
      
  	at Context.<anonymous> (c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\validation-hierarchy.test.js:335:20)

  3) Apply Diff Integration Tests
       Error recovery and partial success workflow:

      AssertionError [ERR_ASSERTION]: First valid change applied
      + expected - actual

      -false
      +true
      
  	at Context.<anonymous> (c:\Users\plafayette\workspace\github_projects\vscode-mcp-server\out\test\integration.test.js:400:16)

3 tests failed.
[main 2025-05-30T17:31:32.632Z] Extension host with pid 47208 exited with code: 0, signal: unknown.
Exit code:   1
